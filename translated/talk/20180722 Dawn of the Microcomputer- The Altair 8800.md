微型计算机的始祖：Altair 8800
======
《大众电子》的订阅者是个复杂的群体，杂志编辑 Arthur Salsberg 不得不在 [1974 年 12 月刊][1] 中的前言部分指出这点。此前，杂志编辑组曾收到了对《如何搭建家庭媒体中心》文章的抱怨，称这篇文章激励了许多业余电视爱好者走出去，削弱了专业修理人员存在的必要性，这对许多人的电视造成了极大伤害。Salsberg 认为，这个担忧的产生可能是因为大家不清楚《大众电子》读者们的真实水平。他解释道，杂志内部调查的数据显示，52 % 的订阅者都是某方面的电子专家，并且其中的 150,000 人在最近 60 天之内都修过电视。此外，订阅者们平均在电子产品上花费了 470 美金（2018 年则是 3578 美金），并且他们有对万用表、真空管伏特计、电子管测试仪、晶体管测试仪、射频讯号产生器和示波器的需求。“《大众电子》的读者们并不全都是新手。”Salsberg 总结道。

熟悉《大众电子》的人居然会质疑它的订阅者，这令我十分吃惊。不过最近 60 天我的确没修过电视。我的电脑对我来说就是一块铝，我甚至没把它拆开看过。1974 年 12 月的《大众电子》刊登的像《驻波比是什么以及如何处理它》和《对万用表的测试》之类的特色文章，甚至连广告都令人生畏。它们中有个看起来像某种立体声系统的东西大胆地写道“除了‘四通道单元（即内建的 SQ、RM 和 CD-4 解码接收器）’，没有任何音频设备是被期待的”。这也表明了《大众电子》的订阅者一定对电子有很多深入的了解。

不过在 [1975 年 1 月刊][2] 中，杂志为读者们带来了一些他们从没见过的东西。在标题“发现项目”下面，杂志的封面是一个黑灰色的盒子，它的前面板上有一组开关和灯。这便是 Altair 8800，“世界上首个有商业竞争力的迷你计算机”，它的售价低于 400 美元。尽管 Altair 作为“迷你计算机”被宣传，但其实大家都将它称为“微机”和PC，它是首个商业上成功的新型电脑。Altair 十分小巧而且很便宜，以至于它成为了当时家家户户都能用起的电脑。正如 Salsberg 所写道，它在《大众电子》上的出现意味着：“家用电脑的时代终于到来了。”

![《大众电子》1975 年 1 月刊的封面][3]

此前，我曾写过 [关于 Altair 的文章][4]，但我觉得 Altair 有让我再次介绍的价值。它在当时性能并不强（虽然它便宜很多），也不是首个装载微处理器（由至少三个微处理器组成）的通用计算机。但是 Altair 是一种可供我们所有人使用的计算机。它是历史上包括我们所拥有的设备中首台流行的计算机，早于 Altair 计算机都是完全不同的机器，它们由穿孔卡编程并且很少与用户交互。不过 Altair 也是台极其简单的计算机，它不附带任何操作系统甚至引导加载器。除非你购买其它外设，否则 Altair 就是一台装配 RAM 并且只有一组开关和灯泡的机器。由于 Altair 操作简单，学习计算的基本理论都成了十分简单的事情，就好像他们在数字世界冒险时遇上了旧世界的居民一样。

### Roberts 和他的公司

Altair 被一家名为 MITS 的公司设计和制造，这家公司位于美国新墨西哥州的阿尔布开克。MITS 由一个叫 H. Edward Roberts 运营。他们起初借 19 世纪 70 年代的热潮制造模型火箭的遥测系统。集成电路将计算器的成本降低到十分可观的数字，突然之间它就成了美国教授们的必需品。不幸的是，由于计算器市场竞争过于激烈，到了 1974 年，MITS 便负债累累。

1974 年在计算机界是<ruby>奇迹迭出的一年<rt>annus mirabilis</rt></ruby>。一月的时候，惠普公司推出了世界首个可编程的手持计算器 HP-65。四月的时候，Intel 发布了 Intel 8080，他们的第二款 8 位微处理器，它也是首款受欢迎的微处理器。接着，六月的时候，《Radio Electronics》杂志介绍了 Mark-8 这个自制迷你计算机，它使用了 Intel 在 1972 年推出的 Intel 8008 微处理器。Mark-8 是使用微处理器搭建的第三台电脑，它的首次登场是在杂志的封面上。Mark-8 在《Radio Electronics》上的出现促使了《大众电子》寻找微机项目的出现。

《大众电子》的订阅者们其实早在 1974 年 12 月就通过电邮获得了 1975 年 1 月刊的副本。他们公布的 Altair 为这个<ruby>奇迹迭出的一年<rt>annus mirabilis</rt></ruby>画上了圆满的句号。Altair 的出现是十分重要的，因为此前从未有过向公众提供的价格公道而又功能齐全的电脑。当时，作为最受欢迎的迷你计算机之一的 PDP-8 要几千美金才能买到。不过 Altair 搭载的 Intel 8080 芯片几乎能与 PDP-8 匹敌；8080 支持更广泛的指令集，而且 Altair 可以扩展到 64 kb 内存，显然强于仅有 4 kb 内存的 PDP-8。并且，Mark-8 也不是他的对手，因为它搭载的是只能处理 16 kb 内存的 Intel 8008。在 Mark-8 必须由用户按照说明书手动拼装的情况下，Altair 在购买时就已经被组装好了（不过由于后来 MITS 被大量订单淹没，最后真正能获得 Altair 的方式也只有买零件拼装了）。

对许多《大众电子》的读者来说，Altair 是他们了解数字计算的起点。1975 年 1 月刊上那篇介绍 Altair 的文章由 Roberts 和 Altair 的联合设计师 William Yates 所写。Roberts 和 Yates 煞费苦心地用电工和无线电狂热者们所熟悉的词汇来介绍了数字硬件和计算机编程的基本概念。他们写道：“一台计算机其实由一堆可变的硬件构成。仅需修改储存于内存之中的为组合形式，便可改变硬件设备的种类。”同时，Roberts 和 Yates 认为编程的基本概念是“足够简单并能在较短时间内掌握，但是想要成为一个高效的程序员必须经验丰富且富有创造力。”对此我十分认同。尽管已经组装好了，文章仍包含了用来讲解 Intel 8080 的组成的详细图表。文章解释了 CPU 和计算机内存单元的区别，堆栈指针的概念和汇编语言以及更高级的语言（例如 FORTRAN 和 BASIC）比起手动输入机器码所带来的巨大优势。

其实，《大众电子》在 1975 年 1 月刊之前就出版过 Roberts 撰写的系列文章。这一系列作为短期课程被收录在“数字逻辑”专栏中。在 1974 年 12 月刊中，Roberts 为读者们带来了关于构建“超低成本计算机终端”的文章，文章中介绍了可以用于 8 位电脑中输入值的八进制键盘。在介绍这个键盘时，Roberts 解释了晶体管到晶体管的逻辑工作原理，以及关于构建一种可以“记住”数字值的触发器的方法。Roberts 承诺说，这个键盘可以在下个月即将公布的 Altair 电脑中使用。

有多少《大众电子》的读者制作了这个键盘我们无从得知，但是那个键盘的确是个很有用的东西。如果没有键盘和其它输入设备，我们只能通过拨动 Altair 面板上的开关来输入值。Altair 的面板上有 16 行开关被用来设置地址，而下方的 8 个则是用来操作计算机的。16 行中最右边的开关是用来指定要储存在内存中的值的。这么做不无道理，因为 Intel 8080 使用 16 位的值来处理 8 位的信息。而这 16 个开关每一个都代表了一个位，当开关向上时代表 1，向下则代表 0。用这样的方式交互是个启示（一会儿我们就会讲到），因为 Altair 的面板是真正的二进制界面。这使得你可以触摸到裸露的金属。

尽管在当下 Altair 的界面对我们来说完全不像是人用的，不过在那个时候这可是不平凡的。比如 PDP-8 的面板上有个类似的但更漂亮的二进制输入装置，而且它被涂上了吸引人的黄色和橙色，不过讲真，它应该重新来过。然而 PDP-8 经常与纸带阅读器或电传打字机配合使用，这使得程序输入更加容易。这些 I/O 设备价格高昂，这意味着 Altair 的用户们大都会被面板卡住。正如你所想，通过这一堆开关进入一个大型程序是个繁重的工作。不过幸运的是，Altair 可以与盒式记录器连接，这样一来载入程序就不是什么难事了。Bill Gates 和 Paul Allen 进行了微软的首次商业合作，为 Altair 编写了 BASIC 语言，并在 1975 年以 MITS 许可证发行。此后，那些买得起电传打字机的用户就能 [通过纸带来将 BASIC 载入 Altair][5] 了，并能使得用户能够通过字符界面与 Altair 交互。之后，BASIC 便成为了学生们最爱的入门编程语言，并成了早期微机时代的标准接口。

### z80pack

多亏了网络上一些人，特别是 Udo Munk 的努力，你可以在你的电脑上运行 Altair 的模拟器。这个模拟器是在 Zilog Z80 CPU 的虚拟套件上构建的，这个 CPU 可以运行 Intel 8080 的软件。Altair 模拟器允许你像 Altair 的用户们一样调整面板上的开关。尽管点击这些开关的感觉不如拨动真实开关，但是使用 Altair 模拟器仍是一个能让你知道二进制人机交互效率有多低的途径，不过我觉得这同时也很简明直观。

z80pack 是 Udo Munk 开发的 Z80 模拟器套件，你可以在 z80pack 的官网上找到它的下载链接。我在 [上一篇介绍 Altair 的文章中][4] 写到过在 macOS 上使用它的详细过程。如果你能编译 FrontPanel 库和 `altairsim` 可执行程序，你应该能直接运行 `altairsim` 并看到这个窗口：

![模拟器中的 Altair 面板][6]

在新版的 z80pack 中（比如我正在使用的 1.36 版本），你可以使用一个叫 Tarbell boot ROM 的功能，我觉得这是用来加载磁盘镜像的。经我测试，它的意思是你不能写入 RAM 中的前几个信息。在编辑 `/altairsim/conf/system.conf` 之后，你可以构建带有一个 16 页 RAM 且没有 ROM 或引导加载器的 Altair。除此之外，你还可以用这个配置文件来扩大运行模拟器的窗口，不得不说这还是挺方便的。

Altair 的面板看起来就很吓人，不过事实上并没有我们想象中的这么可怕。[Altair 说明书][7] 对解释开关和指示灯起到了很大的作用，这个 [YouTube 视频][8] 也是。若想运行一个简易的程序，你只需要了解一点点东西。Altair 右上方标签为 D0 到 D7 的指示灯代表当前处理地址的信息。标签为 A0 到 A15 的指示灯标识当前的地址。地址指示灯下的 16 个开关可以用来设置新地址；当 “EXAMINE” 开关被向上推动时，数据指示灯将会更新，并显示新地址上的内容。用这个功能，你便能观察到内存中所有的信息了。你也可以将 “EXAMINE” 推下来自动检查下一个位置上的信息，这使得检索信息更容易了。

要将模式保存到信息中，请使用最左边的 8 个标签为 0 到 7 的开关。然后，请向上推动 “DEPOSIT” 按钮。

在《大众电子》 的 [1975 年 2 月刊][9] 中，Roberts 和 Yates 制作了一小段程序来确保用户们的 Altair 正常工作。这个程序从内存中读取两个整型数据并添加之后将它们存回内存中。这个小程序仅由 6 条指令组成，但是这 6 条指令包含了 14 条在一起的内存信息，所以要正确地输入它们需要一点时间。这个程序也被写入了 Altair 的说明书，原文如下：

| Address | Mnemonic | Bit Pattern | Octal Equivalent |
| :------: | :------: | :------: | :------: |
| 0 | LDA | 00 111 010 | 0 7 2 |
| 1 | (address) | 10 000 000 | 2 0 0 |
| 2 | (address) | 00 000 000 | 0 0 0 |
| 3 | MOV B, A | 01 000 111 | 1 0 7 |
| 4 | LDA | 00 111 010 | 0 7 2 |
| 5 | (address) | 10 000 001 | 2 0 1 |
| 6 | (address) | 00 000 000 | 0 0 0 |
| 7 | ADD B | 10 000 000 | 2 0 0 |
| 8 | STA | 00 110 010 | 0 6 2 |
| 9 | (address) | 10 000 010 | 2 0 2 |
| 10 | (address) | 00 000 000 | 0 0 0 |
| 11 | JMP | 11 000 011 | 3 0 3 |
| 12 | (address) | 00 000 000 | 0 0 0 |
| 13 | (address) | 00 000 000 | 0 0 0 |

如果你通过开关来输入上面这些值，最终会得到一个程序，它会读取内存 128 中的值，并将其添加至 129 中，最终将其保存至 130 中。每条指令都会占用一个地址，它们最开始会被给予最低有效位，这便是第二个字节总会被清零（没有高于 255 的地址）的原因了。在输入这个程序并在 128 和 129 中输入了一些值之后，你可以向下推动 “RUN” ，之后再将它推到 “STOP” 位置。因为程序循环执行，以一秒内执行上千次的速度反复地添加并保存那些值。并且最后得到的值总是相同的，如果你暂停程序并检查 130，你应该能找到正确答案。

我不知道普通的 Altair 用户是否使用过，不过 z80pack 包括了一个汇编程序 —— `z80asm`，意思是<ruby>适用于 Z80 的汇编程序<rt>Z80 assembly</rt></ruby>，所以它使用了不同的助记符。不过因为 Z80 是被设计来适配为 Intel 8080 写的软件的，所以即使助记符不一样，它们的操作码也是相同的。你可以直接将 `z80asm` 装载进 Altair：

```
 ORG 0000H
START: LD A,(80H) ;Load from address 128.
 LD B,A ;Move loaded value from accumulator (A) to reg B.
 LD A,(81H) ;Load from address 129.
 ADD A,B ;Add A and B.
 LD (82H),A ;Store A at address 130.
 JP START ;Jump to start.
```

编译之后，你可以调用汇编程序来将其转换为 Intel HEX 文件：

```shell
$ ./z80asm -fh -oadd.hex add.asm
```

我们用带有 `h` 参数的 `-f` 标识来定义输出的 HEX 文件。你可以用 `-x` 标识来传递 HEX 文件，从而使得 Altair 能够加载程序：

```shell
$ ./altairsim -x add.hex
```

这会在内存中自动设置前 14 个信息，就和你通过开关手动输入这些值一样。你可以直接使用 “RUN” 按钮来替代以前那些繁琐的步骤，这是如此的简单！

我不觉得有很多 Altair 用户以这种方式来编写软件。Altair BASIC 发布后，使得 BASIC 成为了 Altair 编程最简单的方法。z80pack 同时也包括了一些包含不同版本 Altair BASIC 的 HEX 文件；在模拟器中，你可以用这个方式加载 4.0 版本的 4K BASIC：

```shell
$ ./altairsim -x basic4k40.hex
```

当你开启模拟器并按下 “RUN” 按钮之后，你就会看到 BASIC 开始执行了，同时它会在终端中与你交互。它首先会提示你输入你内存的可用量，我们输入 4000 字节。随后，在显示 “OK” 提示符之前，它会问你几个问题，Gates 和 Allen 用这个来代替标准的 “READY” 并以此节省内存。在这之后，你便可以使用 BASIC 了：

```
OK
PRINT 3 + 4
 7
```

尽管只有极小的 4 kb 空间来运行 BASIC，不过你仍迈出了使用面板操控电脑的重要一步。

很显然，Altair 远不及如今的家用电脑，并且比它晚十多年发布的 Mac 电脑看上去也是对 Altair 电脑的巨大飞跃。但是对亲手组装了 Altair 的《大众电子》的读者们来说，只用了低于 400 美金和一半的书柜空间的 Altair 才是第一个它们真正能拥有的全功能电脑。对那时只能用 [一叠卡片][10] 或一卷磁带来与计算机交互的人们来说，Altair 是个令人眼前一亮的玩意。这之后的微机基本都是在对 Altair 改进，使得它更易用。从某种意义上来说，我们甚至可以把它们看成更复杂的 Altair。Altair，一个野兽派的极简作品，却为之后的许多微机打下了铺垫。

如果你觉得这篇文章写的不错，你可以在推特上关注 [@TwoBitHistory][11] 或订阅 [RSS feed][12] 来获得我们文章的更新提醒。文章每两周就会更新一次！

TwoBitHistory 的上一篇文章是…………

> “跟我一起来进行这振奋人心的冒险吧！只需要十分钟，你就能了解到 10 年都没人用过的软件。” <https://t.co/R9zA5ibFMs>
>
> — TwoBitHistory (@TwoBitHistory) [写于 2018 年 7 月 7 日][13]

--------------------------------------------------------------------------------

via: https://twobithistory.org/2018/07/22/dawn-of-the-microcomputer.html

作者：[Two-Bit History][a]
选题：[lujun9972][b]
译者：[zhs852](https://github.com/zhs852)
校对：[校对者ID](https://github.com/校对者ID)

本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创编译，[Linux中国](https://linux.cn/) 荣誉推出

[a]: https://twobithistory.org
[b]: https://github.com/lujun9972
[1]: https://www.americanradiohistory.com/Archive-Poptronics/70s/1974/Poptronics-1974-12.pdf
[2]: https://www.americanradiohistory.com/Archive-Poptronics/70s/1975/Poptronics-1975-01.pdf
[3]: https://twobithistory.org/images/jan1975-altair.jpg
[4]: https://twobithistory.org/2017/12/02/simulating-the-altair.html
[5]: https://www.youtube.com/watch?v=qv5b1Xowxdk
[6]: https://www.autometer.de/unix4fun/z80pack/altair.png
[7]: http://www.classiccmp.org/dunfield/altair/d/88opman.pdf
[8]: https://www.youtube.com/watch?v=suyiMfzmZKs
[9]: https://www.americanradiohistory.com/Archive-Poptronics/70s/1975/Poptronics-1975-02.pdf
[10]: https://twobithistory.org/2018/06/23/ibm-029-card-punch.html
[11]: https://twitter.com/TwoBitHistory
[12]: https://twobithistory.org/feed.xml
[13]: https://twitter.com/TwoBitHistory/status/1015647820353867776?ref_src=twsrc%5Etfw
